!function(e){function t(){function t(e){"remove"===e&&this.each(function(e,t){var n=r(t);n&&n.remove()}),this.find("span.mceEditor,div.mceEditor").each(function(e,t){var n=tinymce.get(t.id.replace(/_parent$/,""));n&&n.remove()})}function i(e){var n,i=this;if(null!=e)t.call(i),i.each(function(t,n){var i;(i=tinymce.get(n.id))&&i.setContent(e)});else if(i.length>0&&(n=tinymce.get(i[0].id)))return n.getContent()}function r(e){var t=null;return e&&e.id&&c.tinymce&&(t=tinymce.get(e.id)),t}function a(e){return!!(e&&e.length&&c.tinymce&&e.is(":tinymce"))}var o={};e.each(["text","html","val"],function(t,c){var l=o[c]=e.fn[c],u="text"===c;e.fn[c]=function(t){var c=this;if(!a(c))return l.apply(c,arguments);if(t!==n)return i.call(c.filter(":tinymce"),t),l.apply(c.not(":tinymce"),arguments),c;var o="",s=arguments;return(u?c:c.eq(0)).each(function(t,n){var i=r(n);o+=i?u?i.getContent().replace(/<(?:"[^"]*"|'[^']*'|[^'">])*>/g,""):i.getContent({save:!0}):l.apply(e(n),s)}),o}}),e.each(["append","prepend"],function(t,i){var c=o[i]=e.fn[i],l="prepend"===i;e.fn[i]=function(e){var t=this;return a(t)?e!==n?("string"==typeof e&&t.filter(":tinymce").each(function(t,n){var i=r(n);i&&i.setContent(l?e+i.getContent():i.getContent()+e)}),c.apply(t.not(":tinymce"),arguments),t):void 0:c.apply(t,arguments)}}),e.each(["remove","replaceWith","replaceAll","empty"],function(n,i){var r=o[i]=e.fn[i];e.fn[i]=function(){return t.call(this,i),r.apply(this,arguments)}}),o.attr=e.fn.attr,e.fn.attr=function(t,c){var l=this,u=arguments;if(!t||"value"!==t||!a(l))return c!==n?o.attr.apply(l,u):o.attr.apply(l,u);if(c!==n)return i.call(l.filter(":tinymce"),c),o.attr.apply(l.not(":tinymce"),u),l;var s=l[0],p=r(s);return p?p.getContent({save:!0}):o.attr.apply(e(s),u)}}var n,i,r,a=[],c=window;e.fn.tinymce=function(n){function o(){var i=[],a=0;r||(t(),r=!0),p.each(function(e,t){var r,c=t.id,o=n.oninit;c||(t.id=c=tinymce.DOM.uniqueId()),tinymce.get(c)||(r=new tinymce.Editor(c,n,tinymce.EditorManager),i.push(r),r.on("init",function(){var e,t=o;p.css("visibility",""),o&&++a==i.length&&("string"==typeof t&&(e=-1===t.indexOf(".")?null:tinymce.resolve(t.replace(/\.\w+$/,"")),t=tinymce.resolve(t)),t.apply(e||tinymce,i))}))}),e.each(i,function(e,t){t.render()})}var l,u,s,p=this,f="";if(!p.length)return p;if(!n)return window.tinymce?tinymce.get(p[0].id):null;if(p.css("visibility","hidden"),c.tinymce||i||!(l=n.script_url))1===i?a.push(o):o();else{i=1,u=l.substring(0,l.lastIndexOf("/")),-1!=l.indexOf(".min")&&(f=".min"),c.tinymce=c.tinyMCEPreInit||{base:u,suffix:f},-1!=l.indexOf("gzip")&&(s=n.language||"en",l=l+(/\?/.test(l)?"&":"?")+"js=true&core=true&suffix="+escape(f)+"&themes="+escape(n.theme||"modern")+"&plugins="+escape(n.plugins||"")+"&languages="+(s||""),c.tinyMCE_GZ||(c.tinyMCE_GZ={start:function(){function t(e){tinymce.ScriptLoader.markDone(tinymce.baseURI.toAbsolute(e))}t("langs/"+s+".js"),t("themes/"+n.theme+"/theme"+f+".js"),t("themes/"+n.theme+"/langs/"+s+".js"),e.each(n.plugins.split(","),function(e,n){n&&(t("plugins/"+n+"/plugin"+f+".js"),t("plugins/"+n+"/langs/"+s+".js"))})},end:function(){}}));var m=document.createElement("script");m.type="text/javascript",m.onload=m.onreadystatechange=function(t){t=t||window.event,2===i||"load"!=t.type&&!/complete|loaded/.test(m.readyState)||(tinymce.dom.Event.domLoaded=1,i=2,n.script_loaded&&n.script_loaded(),o(),e.each(a,function(e,t){t()}))},m.src=l,document.body.appendChild(m)}return p},e.extend(e.expr[":"],{tinymce:function(e){var t;return!!(e.id&&"tinymce"in window&&(t=tinymce.get(e.id),t&&t.editorManager===tinymce))}})}(jQuery);